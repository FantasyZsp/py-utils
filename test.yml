paths:
  /family/person/listAPP:
    post:
      tags:
        - "all"
      summary: "zsp获得家长列表"
      description: ""
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        required: true
        schema:
          $ref: "#/definitions/FamilyPersonListParam"
        description: "获得家长列表查询参数"
      responses:
        200:
          schema:
           $ref: "#/definitions/FamilyPersonListAPPPage"
          description: "家长列表"

  /family/person/listPC:
    post:
      tags:
        - "all"
      summary: "mfh获得家长列表"
      description: ""
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        required: true
        schema:
          $ref: "#/definitions/FamilyPersonListParam"
        description: "获得家长列表查询参数"
      responses:
        200:
          schema:
           $ref: "#/definitions/FamilyPersonListPCPage"
          description: "家长列表"

  /family/person:
    get:
      tags:
        - "all"
      summary: "zsp获得家长详情"
      description: ""
      produces:
      - "application/json"
      parameters:
      - name: "id"
        in: "query"
        required: true
        type: "string"
        description: "家长记录id"
      responses:
        200:
          schema:
           $ref: "#/definitions/FamilyPersonDto"
          description: "家长详情"

    put:
      tags:
        - "all"
      summary: "mfh修改家长详情"
      description: "1.note最多200"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        required: true
        schema:
          $ref: "#/definitions/FamilyPersonPutDto"
        description: "家长详情"
      responses:
        200:
          description: "操作成功"

  /family/person/student:
    get:
      tags:
        - "all"
      summary: "zsp获得家长的学员列表"
      description: ""
      produces:
      - "application/json"
      parameters:
      - name: "id"
        in: "query"
        required: true
        type: "string"
        description: "家长记录id"
      responses:
        200:
          schema:
            type: "array"
            items:
              $ref: "#/definitions/FamilyStudentDto"
          description: "学员列表"

  /family/person/transfer:
    post:
      tags:
        - "all"
      summary: "zsp家长转让"
      description: ""
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        required: true
        schema:
          $ref: "#/definitions/FamilyPersonTransferParam"
        description: "家长转让"
      responses:
        200:
          description: "操作成功"

  /family/person/share:
    post:
      tags:
        - "all"
      summary: "mfh家长共享"
      description: ""
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        required: true
        schema:
          $ref: "#/definitions/FamilyPersonShareParam"
        description: "家长共享"
      responses:
        200:
          description: "操作成功"

  /family/person/del:
    post:
      tags:
        - "all"
      summary: "mfh家长放弃"
      description: ""
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        required: true
        schema:
          $ref: "#/definitions/FamilyPersonDelParam"
        description: "家长放弃"
      responses:
        200:
          description: "操作成功"

  /family/person/call:
    get:
      tags:
        - "all"
      summary: "mfh员工联系家长记录list"
      description: ""
      produces:
      - "application/json"
      parameters:
      - name: "id"
        in: "query"
        required: true
        type: "string"
        description: "家长记录id"
      responses:
        200:
          schema:
            type: "array"
            items:
              $ref: "#/definitions/FamilyPersonCallDto"
          description: "联系记录"

    post:
      tags:
        - "app"
      summary: "mfh员工联系家长"
      description: ""
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        required: true
        schema:
          $ref: "#/definitions/FamilyPersonCallParam"
        description: "联系记录"
      responses:
        200:
          description: "操作成功"

  /family/person/signs:
    get:
      tags:
        - "all"
      summary: "zsp获得家长标签和备注标签"
      description: "mfh"
      produces:
      - "application/json"
      parameters:
      - name: "id"
        in: "query"
        required: true
        type: "string"
        description: "家长记录id"
      responses:
        200:
          schema:
            $ref: "#/definitions/FamilySignsDto"
          description: "家长标签详情"

    put:
      tags:
        - "all"
      summary: "zsp修改家长标签"
      description: ""
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        required: true
        schema:
          $ref: "#/definitions/FamilySignsParam"
      responses:
        200:
          description: "操作成功"

  /family/person/signs-remark:
    put:
      tags:
        - "all"
      summary: "mfh修改家长备注标签"
      description: ""
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        required: true
        schema:
          $ref: "#/definitions/FamilySignsRemarkParam"
      responses:
        200:
          description: "操作成功"

  /family/person/record:
    get:
      tags:
        - "pc"
      summary: "zsp获得家长操作记录"
      description: ""
      produces:
      - "application/json"
      parameters:
      - name: "id"
        in: "query"
        required: true
        type: "string"
        description: "家长记录id"
      responses:
        200:
          schema:
            type: "array"
            items:
              $ref: "#/definitions/FamilyPersonRecordDto"
          description: "家长记录列表"

  /user/tenant/search-name:
    get:
      tags:
        - "pc"
      summary: "mfh获得该子机构的所有正式员工"
      description: ""
      produces:
      - "application/json"
      parameters:
      - name: "name"
        in: "query"
        required: true
        type: "string"
        description: "员工名称"
      responses:
        200:
          schema:
            type: "array"
            items:
              $ref: "#/definitions/SearchNameDto"
          description: "模糊搜索数据"

  /config/tag-group/all-visible:
    get:
      tags:
        - "all"
      summary: "zsp获取所有可用标签分组列表"
      description: ""
      produces:
      - "application/json"
      parameters:
      - name: "type"
        in: "query"
        required: true
        type: "string"
        description: "标签类型，1学生2家长"
      responses:
        200:
          schema:
            type: "array"
            items:
              $ref: "#/definitions/ConfigTagGroupInfoDto"
          description: "标签数据"

  /test/userorgid:
    get:
      summary: "获得自己的邀请码"
      description: ""
      produces:
      - "application/json"
      responses:
        200:
          schema:
            $ref: "#/definitions/TestLevelDto"
          description: "ok"

definitions:
  TestLevelDto:
    properties:
      id:
        type: "string"
        description: "邀请码"
  FamilyPersonListParam:
    description: "获得家长列表查询参数"
    properties:
      signedType:
        type: "string"
        description: "签约类型（已签约：signed，未签约：unsigned）"
      familyName:
        type: "string"
        description: "家长名称搜索"
      signs:
        type: "string"
        description: "筛选标签的对象，{标签组id，[选中标签列表id]}"
      sharer:
        type: "string"
        description: "共享关系"
      action:
        type: "string"
        description: "动作（transfer：转让、share：分享、delete：放弃）"
      orders:
        type: "string"
        description: "排序条件(入库时间：intoASC,intoDESC；跟进次数：followCountASC,followCountDESC；跟进时间：followTimeASC,followTimeDESC；
        签约时间：signedTimeASC，signedTimeDESC；返回公共库：countdownASC,countdownDESC；录入时间：createdAtASC,createdAtDESC；
        最新变动时间：newestTimeASC,newestTimeDESC)"
      page:
        type: "integer"
        description: "页码"
      size:
        type: "integer"
        description: "数量"

  FamilyPersonListAPPPage:
    type: "object"
    properties:
      data:
        type: "array"
        items:
          $ref: '#/definitions/FamilyPersonListAPPDto'
        description: "APP分页返回的构造对象"
      total:
        type: "integer"

  FamilyPersonListAPPDto:
    description: "家长列表"
    properties:
      id:
        type: "string"
        description: "主键"
      avatar:
        type: "string"
        description: "家长头像"
      name:
        type: "string"
        description: "家长名称"
      phone:
        type: "string"
        description: "家长电话"
      owner:
        type: "string"
        description: "负责人"
      sharer:
        type: "string"
        description: "共享人"
      followTime:
        type: "string"
        description: "最新跟进时间"

  FamilyPersonListPCPage:
    type: "object"
    properties:
      data:
        type: "array"
        items:
          $ref: '#/definitions/FamilyPersonListPCDto'
        description: "APP分页返回的构造对象"
      total:
        type: "integer"

  FamilyPersonListPCDto:
    description: "家长列表"
    properties:
      id:
        type: "string"
        description: "主键"
      avatar:
        type: "string"
        description: "家长头像"
      name:
        type: "string"
        description: "家长名称"
      phone:
        type: "string"
        description: "家长电话"
      isRegister:
        type: "string"
        description: "是否注册app"
      otherPhone:
        type: "string"
        description: "备用电话"
      createdAt:
        type: "string"
        description: "录入时间"
      intoTime:
        type: "string"
        description: "入库时间"
      signedTime:
        type: "string"
        description: "签约时间"
      parentTags:
        type: "array"
        items:
          type: "object"
          properties:
            name:
              type: "string"
              description: "标签名称"
            style:
              type: "string"
              description: "所属标签组的style"
        description: "标签数组（最新的两个）"
      parentRemarkTag:
        type: "array"
        items:
          type: "string"
        description: "家长备注标签"
      remark:
        type: "string"
        description: "备注"
      infoFrom:
        type: "string"
        description: "信息来源"
      countdown:
        type: "integer"
        description: "返回公共库倒计时（单位：小时）"
      owner:
        type: "object"
        properties:
          id:
            type: "string"
            description: "用户id"
          name:
            type: "string"
            description: "用户名称"
          avatar:
            type: "string"
            description: "用户头像地址"
        description: "负责人"
      sharer:
        type: "array"
        items:
          type: "object"
          properties:
            id:
              type: "string"
              description: "用户id"
            name:
              type: "string"
              description: "用户名称"
            avatar:
              type: "string"
              description: "用户头像地址(通常只有注册用户自己上传时才有)"
          description: "共享人（最多两个）"
      newestTime:
        type: "string"
        description: "最新变动时间"
      newestAction:
        type: "string"
        description: "最新变动动作"
      followTime:
        type: "string"
        description: "最新跟进时间"
      followCount:
        type: "string"
        description: "最新跟进数"
      followAtion:
        type: "string"
        description: "最新跟进动作"
      follower:
        type: "string"
        description: "最新跟进人"
      orgName:
        type: "string"
        description: "所属子机构（名称）"

  FamilyPersonTransferParam:
    properties:
      ids:
        type: "array"
        items:
          type: "string"
        description: "家长记录id"
      reason:
        type: "string"
        description: "转让原因"
      remark:
        type: "string"
        description: "备注"
      userId:
        type: "string"
        description: "转让人id"

  FamilyPersonShareParam:
    properties:
      ids:
        type: "array"
        items:
          type: "string"
        description: "家长记录id"
      userIds:
        type: "array"
        items:
          type: "string"
        description: "共享人id"

  FamilyPersonDelParam:
    properties:
      ids:
        type: "array"
        items:
          type: "string"
        description: "家长记录id"
      remark:
        type: "string"
        description: "备注"
      isValid:
        type: "boolean"
        description: "是否有效的"
      reason:
        type: "string"
        description: "原因"

  FamilyPersonCallParam:
    properties:
      id:
        type: "string"
        description: "家长记录id"
      duration:
        type: "integer"
        description: "通话时长（单位：秒）"

  FamilyPersonCallDto:
    properties:
      id:
        type: "string"
        description: "联系记录"
      duration:
        type: "integer"
        description: "通话时长（单位：秒）"
      name:
        type: "string"
        description: "员工名称"
      phone:
        type: "string"
        description: "家长手机号"
      createdAt:
        type: "string"
        description: "联系时间"

  FamilyPersonDto:
    properties:
      owner:
        type: "object"
        properties:
          id:
            type: "string"
            description: "用户id"
          name:
            type: "string"
            description: "用户名称"
          avatar:
            type: "string"
            description: "用户头像地址"
        description: "负责人"
      sharer:
        type: "array"
        items:
          type: "object"
          properties:
            id:
              type: "string"
              description: "用户id"
            name:
              type: "string"
              description: "用户名称"
            avatar:
              type: "string"
              description: "用户头像地址"
          description: "共享人（最多两个）"
      family:
        type: "object"
        properties:
          id:
            type: "string"
            description: "主键"
          name:
            type: "string"
            description: "家长名称"
          avatar:
            type: "string"
            description: "家长头像"
          registerName:
            type: "string"
            description: "家长注册名称"
          phone:
            type: "string"
            description: "手机号码"
          backPhone:
            type: "string"
            description: "备用电话"
          address:
            type: "string"
            description: "家庭地址"
          workName:
            type: "string"
            description: "工作单位"
          position:
            type: "string"
            description: "职位"
          edu:
            type: "string"
            description: "学历"
          degree:
            type: "string"
            description: "学位"
          note:
            type: "string"
            description: "备注"

  FamilyPersonPutDto:
    properties:
      id:
        type: "string"
        description: "主键"
      name:
        type: "string"
        description: "家长名称"
      backPhone:
        type: "string"
        description: "备用电话"
      address:
        type: "string"
        description: "家庭地址"
      workName:
        type: "string"
        description: "工作单位"
      position:
        type: "string"
        description: "职位"
      edu:
        type: "string"
        description: "学历"
      degree:
        type: "string"
        description: "学位"
      note:
        type: "string"
        description: "备注"

  FamilyStudentDto:
    properties:
      id:
        type: "string"
        description: "主键"
      sn:
        type: "string"
        description: "学员编号"
      name:
        type: "string"
        description: "学员名称"
      avatar:
        type: "string"
        description: "学员头像"
      gender:
        type: "integer"
        description: "性别.1男0女"
      grade:
        type: "string"
        description: "年级"
      school:
        type: "string"
        description: "学校"
      address:
        type: "string"
        description: "家庭地址"
      owner:
        type: "string"
        description: "负责人"

  FamilySignsDto:
     properties:
      tags:
        type: "array"
        items:
          type: "object"
          properties:
            id:
              type: "string"
              description: "主键"
            parentTagId:
              type: "string"
              description: "标签组id"
            name:
              type: "string"
              description: "名称"
            style:
              type: "string"
              description: "所属标签组的style"
      remarkTags:
        type: "array"
        items:
          type: "object"
          properties:
            name:
              type: "string"
              description: "名称"

  FamilySignsParam:
     properties:
      id:
        type: "string"
        description: "家长记录id"
      del:
        type: "array"
        items:
          type: "object"
          properties:
            id:
              type: "string"
              description: "主键"
            parentTagId:
              type: "string"
              description: "标签组id"
            name:
              type: "string"
              description: "名称"
            style:
              type: "string"
              description: "所属标签组的style"
      add:
        type: "array"
        items:
          type: "object"
          properties:
            id:
              type: "string"
              description: "主键"
            parentTagId:
              type: "string"
              description: "标签组id"
            name:
              type: "string"
              description: "名称"
            style:
              type: "string"
              description: "所属标签组的style"

  FamilySignsRemarkParam:
     properties:
      id:
        type: "string"
        description: "家长记录id"
      del:
        type: "array"
        items:
          type: "string"
          description: "名称"
      add:
        type: "array"
        items:
          type: "string"
          description: "名称"
      tags:
        type: "array"
        items:
          type: "string"
          description: "新增备注标签数组"


  FamilyPersonRecordDto:
    properties:
      title:
        type: "string"
        description: "相关动作"
      description:
        type: "string"
        description: "描述"
      createdAt:
        type: "string"
        description: "创建时间"
      createdBy:
        type: "string"
        description: "操作人"

  SearchNameDto:
    properties:
      id:
        type: "string"
        description: "用户id"
      name:
        type: "string"
        description: "用户名称"
      avatar:
        type: "string"
        description: "用户头像"

  ConfigTagGroupInfoDto:
    properties:
      id:
        type: "string"
        description: "主键"
      name:
        type: "string"
        description: "标签组名称"
      preId:
        type: "string"
        description: "前一个标签组的id"
      isMultiple:
        type: "string"
        description: "是否可以多选"
      style:
        type: "string"
        description: "样式"
      tags:
        type: "array"
        items:
          type: "object"
          properties:
            id:
              type: "string"
              description: "标签id"
            name:
              type: "string"
              description: "标签名称"
            preId:
              type: "string"
              description: "前一个标签的id"